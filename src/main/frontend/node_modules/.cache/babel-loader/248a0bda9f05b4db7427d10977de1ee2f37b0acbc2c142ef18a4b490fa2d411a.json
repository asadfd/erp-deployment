{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Login from'./components/Login';import Dashboard from'./components/Dashboard';import axios from'axios';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(true);const[user,setUser]=useState(null);const[userRoles,setUserRoles]=useState(null);useEffect(()=>{checkAuthStatus();},[]);const checkAuthStatus=async()=>{try{const response=await axios.get('/api/auth/status');if(response.data.authenticated){setIsAuthenticated(true);setUser(response.data.username);setUserRoles(response.data.authorities);}else{setIsAuthenticated(false);}}catch(error){setIsAuthenticated(false);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!isAuthenticated?/*#__PURE__*/_jsx(Login,{onLogin:checkAuthStatus}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:isAuthenticated?/*#__PURE__*/_jsx(Dashboard,{user:user,userRoles:userRoles,onLogout:()=>{setIsAuthenticated(false);setUser(null);setUserRoles(null);}}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:isAuthenticated?\"/dashboard\":\"/login\"})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Login","Dashboard","axios","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","loading","setLoading","user","setUser","userRoles","setUserRoles","checkAuthStatus","response","get","data","authenticated","username","authorities","error","children","className","path","element","onLogin","to","onLogout"],"sources":["/mnt/c/Users/Asad Dimtimkar/IdeaProjects/ERPcustom/src/main/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Login from './components/Login';\nimport Dashboard from './components/Dashboard';\nimport axios from 'axios';\nimport './App.css';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const [userRoles, setUserRoles] = useState(null);\n\n  useEffect(() => {\n    checkAuthStatus();\n  }, []);\n\n  const checkAuthStatus = async () => {\n    try {\n      const response = await axios.get('/api/auth/status');\n      if (response.data.authenticated) {\n        setIsAuthenticated(true);\n        setUser(response.data.username);\n        setUserRoles(response.data.authorities);\n      } else {\n        setIsAuthenticated(false);\n      }\n    } catch (error) {\n      setIsAuthenticated(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          <Route \n            path=\"/login\" \n            element={\n              !isAuthenticated ? \n              <Login onLogin={checkAuthStatus} /> : \n              <Navigate to=\"/dashboard\" />\n            } \n          />\n          <Route \n            path=\"/dashboard\" \n            element={\n              isAuthenticated ? \n              <Dashboard user={user} userRoles={userRoles} onLogout={() => {\n                setIsAuthenticated(false);\n                setUser(null);\n                setUserRoles(null);\n              }} /> : \n              <Navigate to=\"/login\" />\n            } \n          />\n          <Route \n            path=\"/\" \n            element={<Navigate to={isAuthenticated ? \"/dashboard\" : \"/login\"} />} \n          />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}